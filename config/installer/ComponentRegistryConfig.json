{
  "location": "$DOWNLOAD_PATH\\installer",
  "components": [
    {
      "name": "OpenSsl",
      "files": [
        {
          "type": "container",
          "source": "ghcr.io/abs-wavesight/openssl:windows-$WINDOWS_VERSION-main-$PLATFORM_COMMIT_SHA",
          "destination": "openssl.tar"
        },
        {
          "type": "file",
          "source": "https://raw.githubusercontent.com/abs-wavesight/cc-platform/$PLATFORM_COMMIT_SHA/compose/installer/manual-docker-compose.openssl.yml",
          "destination": "manual-docker-compose.openssl.yml"
        },
        {
          "type": "file",
          "source": "https://raw.githubusercontent.com/abs-wavesight/cc-platform/$PLATFORM_COMMIT_SHA/config/openssl/generate-certs-prod.ps1",
          "destination": "generate-certs-prod.ps1"
        },
        {
          "type": "file",
          "source": "https://raw.githubusercontent.com/abs-wavesight/cc-platform/$PLATFORM_COMMIT_SHA/config/openssl/openssl-prod.cnf",
          "destination": "openssl-prod.cnf"
        }
      ],
      "actions": [
        {
          "source": "manual-docker-compose.openssl.yml",
          "action": "replaceParameters"
        }
      ]
    },
    {
      "name": "RabbitMq",
      "files": [
        {
          "type": "container",
          "source": "ghcr.io/abs-wavesight/rabbitmq:windows-$WINDOWS_VERSION-main-$PLATFORM_COMMIT_SHA",
          "destination": "rabbitmq.tar"
        },
        {
          "type": "file",
          "source": "https://raw.githubusercontent.com/abs-wavesight/cc-platform/$PLATFORM_COMMIT_SHA/compose/installer/docker-compose.rabbitmq.yml",
          "destination": "docker-compose.rabbitmq.yml"
        },
        {
          "type": "file",
          "source": "https://raw.githubusercontent.com/abs-wavesight/cc-platform/$PLATFORM_COMMIT_SHA/config/rabbitmq/cc-rabbitmq.conf",
          "destination": "cc-rabbitmq.conf"
        },
        {
          "type": "file",
          "source": "https://raw.githubusercontent.com/abs-wavesight/cc-platform/$PLATFORM_COMMIT_SHA/config/rabbitmq/definitions/local/local.definitions.json",
          "destination": "local.definitions.json"
        },
        {
          "type": "file",
          "source": "https://raw.githubusercontent.com/abs-wavesight/cc-platform/$PLATFORM_COMMIT_SHA/config/rabbitmq/definitions/remote/remote.definitions.json",
          "destination": "remote.definitions.json"
        }
      ],
      "actions": [
        {
          "source": "docker-compose.rabbitmq.yml",
          "action": "replaceParameters"
        },
        {
          "source": "cc-rabbitmq.conf",
          "action": "replaceParameters"
        }
      ]
    },
    {
      "name": "Vector-Site",
      "files": [
        {
          "type": "container",
          "source": "ghcr.io/abs-wavesight/vector:windows-$WINDOWS_VERSION-main-$PLATFORM_COMMIT_SHA",
          "destination": "vector.tar"
        },
        {
          "type": "file",
          "source": "https://raw.githubusercontent.com/abs-wavesight/cc-platform/$PLATFORM_COMMIT_SHA/compose/installer/docker-compose.vector-site.yml",
          "destination": "docker-compose.vector.yml"
        },
        {
          "type": "file",
          "source": "https://raw.githubusercontent.com/abs-wavesight/cc-platform/$PLATFORM_COMMIT_SHA/config/vector/config/site/vector.toml",
          "destination": "vector.toml"
        },
        {
          "type": "file",
          "source": "https://raw.githubusercontent.com/abs-wavesight/cc-platform/$PLATFORM_COMMIT_SHA/config/vector/config/site/remap-container-logs.vrl",
          "destination": "remap-container-logs.vrl"
        }
      ],
      "actions": [
        {
          "source": "docker-compose.vector.yml",
          "action": "replaceParameters"
        },
        {
          "source": "vector.toml",
          "action": "replaceParameters"
        },
        {
          "source": "remap-container-logs.vrl",
          "action": "replaceParameters"
        }
      ]
    },
    {
      "name": "Vector-Central",
      "files": [
        {
          "type": "container",
          "source": "ghcr.io/abs-wavesight/vector:windows-$WINDOWS_VERSION-main-$PLATFORM_COMMIT_SHA",
          "destination": "vector.tar"
        },
        {
          "type": "file",
          "source": "https://raw.githubusercontent.com/abs-wavesight/cc-platform/$PLATFORM_COMMIT_SHA/compose/installer/docker-compose.vector-central.yml",
          "destination": "docker-compose.vector.yml"
        },
        {
          "type": "file",
          "source": "https://raw.githubusercontent.com/abs-wavesight/cc-platform/$PLATFORM_COMMIT_SHA/config/vector/config/central/vector.toml",
          "destination": "vector.toml"
        },
        {
          "type": "file",
          "source": "https://raw.githubusercontent.com/abs-wavesight/cc-platform/$PLATFORM_COMMIT_SHA/config/vector/config/central/remap-site-logs.vrl",
          "destination": "remap-site-logs.vrl"
        }
      ],
      "actions": [
        {
          "source": "docker-compose.vector.yml",
          "action": "replaceParameters"
        },
        {
          "source": "vector.toml",
          "action": "replaceParameters"
        },
        {
          "source": "remap-site-logs.vrl",
          "action": "replaceParameters"
        }
      ]
    },
    {
      "name": "Drex-Message",
      "files": [
        {
          "type": "container",
          "source": "ghcr.io/abs-wavesight/cc-drex-message-service:windows-$WINDOWS_VERSION-main-$DREX_COMMIT_SHA",
          "destination": "drex-message.tar"
        },
        {
          "type": "file",
          "source": "https://raw.githubusercontent.com/abs-wavesight/cc-platform/$PLATFORM_COMMIT_SHA/compose/installer/docker-compose.drex-message.yml",
          "destination": "docker-compose.drex-message.yml"
        }
      ],
      "actions": [
        {
          "source": "docker-compose.drex-message.yml",
          "action": "replaceParameters"
        }
      ]
    },
    {
      "name": "Drex-File",
      "files": [
        {
          "type": "container",
          "source": "ghcr.io/abs-wavesight/cc-drex-file-service:windows-$WINDOWS_VERSION-main-$DREX_COMMIT_SHA",
          "destination": "drex-file.tar"
        },
        {
          "type": "file",
          "source": "https://raw.githubusercontent.com/abs-wavesight/cc-platform/$PLATFORM_COMMIT_SHA/compose/installer/docker-compose.drex-file.yml",
          "destination": "docker-compose.drex-file.yml"
        }
      ],
      "actions": [
        {
          "source": "docker-compose.drex-file.yml",
          "action": "replaceParameters"
        }
      ]
    },
    {
      "name": "OpenSsh",
      "files": [
        {
          "type": "container",
          "source": "ghcr.io/abs-wavesight/openssh:windows-$WINDOWS_VERSION-main-$PLATFORM_COMMIT_SHA",
          "destination": "openssh.tar"
        },
        {
          "type": "file",
          "source": "https://raw.githubusercontent.com/abs-wavesight/cc-platform/$PLATFORM_COMMIT_SHA/config/openssh/create-ssh-keys-and-fingerprint.ps1",
          "destination": "create-ssh-keys-and-fingerprint.ps1"
        },
        {
          "type": "file",
          "source": "https://raw.githubusercontent.com/abs-wavesight/cc-platform/$PLATFORM_COMMIT_SHA/config/openssh/sshd.config",
          "destination": "sshd.config"
        },
        {
          "type": "file",
          "source": "https://raw.githubusercontent.com/abs-wavesight/cc-platform/$PLATFORM_COMMIT_SHA/compose/installer/docker-compose.openssh.yml",
          "destination": "docker-compose.openssh.yml"
        }
      ],
      "actions": [
        {
          "source": "docker-compose.openssh.yml",
          "action": "replaceParameters"
        }
      ]
    }
  ]
}
